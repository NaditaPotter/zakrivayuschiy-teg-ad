/* Анимации и стили иконки Like */

/* Важно: HTML-классы должны оставаться: 
   like-icon, card__like-button, card__icon-button, is-liked, button__text
*/

@keyframes like-flash {
  from {
    opacity: 0;
    fill: transparent; /* полностью прозрачная вспышка*/
  }
  to {
    opacity: 1;
    fill: var(--active-heart-color); /* красные искры */
  }
}

@keyframes like-increase {
  0% {
    transform: scale(1);
  }
  99% {
    transform: scale(1.5);
  }
  100% {
    transform: scale(1);
  }
}

/*сердца*/
.like-icon {
  fill: var(--text-color);
  transition: fill 0.3s var(--anim-like-transition-delay, 0s) linear; /* плавное перекрашивание */
}

/*+*/
.like-icon .core,
.like-icon .main-body {
  transition: fill 0.3s ease;
}

/*задержка */
.like-icon .main-body {
  transition-delay: 0.05s;
}

/*сердце действия*/
.like-icon:hover .core,
.like-icon:hover .main-body,
.like-icon:active .core,
.like-icon:active .main-body {
  fill: var(--main-color);
}

/* При установке класса is-liked запускается анимация увеличения */
.like-icon.is-liked {
  animation: like-increase var(--anim-like-duration) var(--anim-like-delay) ease-in;
  transform-origin: center;
}

/* перекрашиваются в красный */
.like-icon.is-liked .core {
  fill: var(--active-heart-color);
  transition: fill 0.3s 0.1s ease;
}

.like-icon.is-liked .main-body {
  fill: var(--active-heart-color);
  transition: fill 0.3s 0.16s ease;
}

.like-icon.is-liked .contour {
  fill: var(--active-heart-color);
  transition: fill 0.3s 0.22s ease;
}

/* вспышка */
.like-icon.is-liked .sparks {
  opacity: 1;
  animation: like-flash var(--anim-like-duration) var(--anim-like-sparks-delay) ease-in;
}

.card__icon-button {
  transition: box-shadow 0.3s ease, border-color 0.3s ease;
}

.card__icon-button:focus {
  outline: none; /*рамка фокус*/
}

/* Убираем лишний псевдо-элемент */
.card__icon-button::before {
  display: none;
}

/*лайк*/
.card__like-button, .footer__button {
  position: relative; /*Контейнер*/
  border: 2px solid var(--main-color);
  overflow: hidden;/* скрываем выезжающий фон */
  background: var(--background-color);
  transition: box-shadow 0.3s ease;   /* + тень */
}

 /*+ тень*/
.card__like-button:focus, .footer__button:focus {
  outline: none;
  box-shadow: 2px 2px 0 0 var(--main-color);
}

.card__like-button:hover, .footer__button:hover {
  box-shadow: 2px 2px 0 0 var(--main-color);
}

.card__like-button::before, .footer__button::before {
  content: "";
  position: absolute;
  left: -100%;/* фон за пределами слева */
  top: 0;
  width: 100%;
  height: 100%;
  background: var(--main-color); /* "залив" */
  transition: left 0.5s ease-in-out; /* плавное заезжание */
}

.card__like-button .button__text, .footer__button .button__text {
  position: relative;
  z-index: 2;/* текст поверх заливки */
  color: var(--main-color);      /* по умолчанию тёмный (чёрный) */
  transition: color 0.3s ease;
}

.card__like-button:hover .button__text, .footer__button:hover .button__text {
  color: var(--button-text-color);
}
